<?php
require_once 'Controller/Controller.php';

session_start();

$c = new Controller();
try {
	$c->createEvent($_POST['event_name']);
	$name = InputValidator::validate_input($event_name, $event_date, $starttime, $endtime);
	$_SESSION["errorEventName"] = "";
	
	$c->createEvent($_POST['event_date']);
	if (strtotime($event_date)== false) {
	$_SESSION["errorEventDate"] = "";
	}  else {
	$date = date('Y-m-d', strtotime($event_date));
	}
	
	$c->createEvent($_POST['starttime']);
	if (strtotime($starttime)== false) {
		$_SESSION["errorStartTime"] = "";
	} else {
		$start = date('H:i', strtotime($starttime));
	}
	
	$c->createEvent($_POST['endtime']);
	if (strtotime($endtime)== false) {
		$_SESSION["errorEndTime"] = "";
	} else {
	$end = date('H:i', strtotime($endtime));
	}
} catch (Exception $e) {
	$_SESSION["errorEventName"] = $e->getMessage();
	$_SESSION["errorEventDate"] = $e->getMessage();
	$_SESSION["errorStartTime"] = $e->getMessage();
	$_SESSION["errorEndTime"] = $e->getMessage();
}
?>

<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="refresh" content="0; url=/EventRegistration/" />
	</head>
</html>